
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JUEGO SIMON DICE</title>
</head>
<body>
    <script>

        //Por defecto coger√° estos colores
        let coloresJuego = [ 
            { nombre: 'rojo', icono: 'üî¥' },
            { nombre: 'azul', icono: 'üîµ' },
            { nombre: 'amarillo', icono: 'üü°' },
            { nombre: 'verde', icono: 'üü¢' },
        ];

        const coloresDisponibles = [
            { nombre: 'rojo', icono: 'üî¥' },
            { nombre: 'azul', icono: 'üîµ' },
            { nombre: 'verde', icono: 'üü¢' },
            { nombre: 'amarillo', icono: 'üü°' },
            { nombre: 'naranja', icono: 'üü†' },
            { nombre: 'violeta', icono: 'üü£' },
            { nombre: 'negro', icono: '‚ö´' },
            { nombre: 'blanco', icono: '‚ö™' },
            { nombre: 'marr√≥n', icono: 'üü§' }
        ];

        let modoDeJuego = 'SUPERVIVENCIA';
        let historialPartidas = [];

        // Objeto donde guardamos los colores elegidos por el jugador y sus iconos
        let coloresSimbolos = {};

        // Inicializa los simbolos de colores elegidos
        coloresJuego.forEach(color => {
            coloresSimbolos[color.nombre] = color.icono;
        });
        
        function menuPrincipal() {
            let opcion = 0;

            do {

                opcion = prompt(`
                Modo de juego actual: ${modoDeJuego}
                Colores actuales: ${coloresJuego.map(color => `${color.icono}`).join(' - ')}
                Partidas jugadas: ${historialPartidas.length}

                Elige una opci√≥n:
                    (1) -> INICIAR JUEGO
                    (2) -> CAMBIAR MODO
                    (3) -> CAMBIAR COLORES
                    (4) -> VER HISTORIAL DE PARTIDAS
                    (5) -> SALIR
                `);

                switch (opcion) {
                    case '1':
                        juegoSimonDice();
                        break;
                    case '2':
                        cambiarModo();
                        break;
                    case '3':
                        cambiarColores();
                        break;
                    case '4':
                        verHistorial();
                        break;
                    case '5':
                        console.log("Salir del juego");
                        break;
                    default:
                        console.log("Opci√≥n no v√°lida. Ingresa una opci√≥n 1-5 ");
                
                        break;
                }
            } while ( opcion !== '5' );
        }

        function cambiarModo() {
            let nuevoModo = prompt(`
            Elige el modo de juego:
                (1) -> CL√ÅSICO (rondas limitadas)
                (2) -> SUPERVIVENCIA (rondas ilimitadas hasta perder)`
            );

            if (nuevoModo === '1') {
                modoDeJuego = "CL√ÅSICO";
            } else if (nuevoModo === '2') {
                modoDeJuego = "SUPERVIVENCIA";
            } else {
                console.log("Modo no v√°lido. Se mantendr√° el modo actual.");
            }
        }

        function cambiarColores() {
            let cantidadColores = parseInt(prompt("¬øCu√°ntos colores quieres usar? (m√≠nimo 4, m√°ximo 9)"));

            if (isNaN(cantidadColores) || cantidadColores < 4 || cantidadColores > 9) {
                console.log("N√∫mero de colores inv√°lido. Debes ingresar entre 4 y 9.");
                return;
            }

            coloresJuego = []; // Reiniciar la selecci√≥n de colores
            coloresSimbolos = {}; // Resetea los colores elegidos

            console.log("Colores disponibles para elegir:");
            coloresDisponibles.forEach((color, index) => {
                // Muestra los colores disponibles y se eligen por posicion
                console.log(`${index + 1}. ${color.nombre} ${color.icono}`);
            });

            // Mostrar colores disponibles y pedirle al usuario que los elija
            for (let i = 0; i < cantidadColores; i++) {
                let eleccion = parseInt(prompt(`Ingresa el n√∫mero del color a elegir:`)) - 1;

                // Validaciones
                if (eleccion < 0 || eleccion >= coloresDisponibles.length || coloresJuego.some(c => c.nombre === coloresDisponibles[eleccion].nombre)) {
                    console.log("Elecci√≥n inv√°lida o color ya elegido. Int√©ntalo de nuevo.");
                    i--; // para que se repita esta iteraci√≥n
                } else {
                    coloresJuego.push(coloresDisponibles[eleccion]); //A√±adimos los colores elegidos al array de colores diponibles
                    coloresSimbolos[coloresDisponibles[eleccion].nombre] = coloresDisponibles[eleccion].icono; // crea una asociaci√≥n entre el nombre del color y su √≠cono en un objeto llamado coloresSimbolos
                }
            }

            console.log("Colores elegidos: " + coloresJuego.map(color => `${color.nombre} ${color.icono}`).join(' - '));

        }

        function verHistorial() {
            if (historialPartidas.length === 0) {
                console.log("No hay partidas jugadas.");
                return;
            }

            historialPartidas.forEach((partida, index) => {
        console.log(`
        [Partida ${index + 1}] MODO ${partida.modo}:
        ${partida.colores.length} colores elegidos.
        ${partida.rondasGanadas === partida.rondasMax ? `Partida ganada.` : `Derrota en ronda ${partida.rondasGanadas}` }`);
            });
        }

        function juegoSimonDice() {
            
            let secuencia = [];
            let rondasSuperadas = 0;
            let rondasMaximas = 0;
            
            if (modoDeJuego === "CL√ÅSICO") {
                rondasMaximas = parseInt(prompt("¬øCu√°ntas rondas deseas jugar?"));
                if (isNaN(rondasMaximas) || rondasMaximas <= 0) {
                    console.log("N√∫mero de rondas inv√°lido. Se jugar√° en el modo SUPERVIVENCIA");
                    modoDeJuego = "SUPERVIVENCIA"; 
                }
            }

            function obtenerColorAleatorio() {
                const indice = Math.floor(Math.random() * coloresJuego.length);
                return coloresJuego[indice];
            }

            let juegoEnCurso = true;

            while (juegoEnCurso && (modoDeJuego === "SUPERVIVENCIA" || rondasSuperadas < rondasMaximas)) {

                const nuevoColor = obtenerColorAleatorio();
                secuencia.push(nuevoColor);

                // Muestra secuencia de colores
                console.log("Secuencia de colores: " + secuencia.map(color => color.icono).join(' - '));

                // Pedir al jugador que ingrese secuencia
                for (let i = 0; i < secuencia.length; i++) {
                    let colorIngresado = prompt(`Ingresa el color n√∫mero ${i + 1}: (${coloresJuego.map(c => c.nombre).join(' - ')})`).toLowerCase();
                    
                    if (colorIngresado !== secuencia[i].nombre) {
                        console.log("üëéüèº Fallaste la secuencia. Rondas superadas: " + rondasSuperadas);
                        juegoEnCurso = false;
                        break;
                    }
                }

                if (juegoEnCurso) {
                    rondasSuperadas++;
                    console.log(`¬°Secuencia correcta! Has superado ${rondasSuperadas} rondas.`);

                    if (modoDeJuego === "CL√ÅSICO" && rondasSuperadas >= rondasMaximas) {

                        console.log("üëåüèº Has completado todas las rondas.");
                        juegoEnCurso = false;
                        break;
                    }
                }

            }

            // Almacenar resultados de la partida en el historial
            historialPartidas.push({
                modo: modoDeJuego,
                colores: [...coloresJuego],
                rondasMax: rondasMaximas || 'ilimitadas',
                rondasGanadas: rondasSuperadas
            });

            if (rondasSuperadas >= rondasMaximas) {
                console.log(`üèÜ ¬°Felicidades! Has ganado la partida con ${rondasSuperadas} rondas superadas.`);
            } else {
                console.log(`üíî Has perdido. Superaste ${rondasSuperadas} rondas.`);
            }


            let jugarDeNuevo = prompt("¬øQuieres jugar otra vez? (si/no)").toLowerCase();

            if (jugarDeNuevo === "si") {
                juegoSimonDice();
            }

    }
                
        
    menuPrincipal();

    </script>
</body>
</html>

